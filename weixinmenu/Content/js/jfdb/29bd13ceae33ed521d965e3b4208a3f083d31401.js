define("list/ListController",["require","pro","global/controller/BaseController"],function(t){function i(){this.applySuper(arguments),this.init()}function e(){this.initListener(),app.showScrollToTop(!0)}function s(){}var n=(t("pro"),t("global/controller/BaseController"));return n.extend({constructor:i,statics:{},members:{init:e,initListener:s}})}),define("list/ListView",["require","jquery","pro","global/view/BaseView"],function(t){var i=(t("jquery"),t("pro"),t("global/view/BaseView")),e=i.extend({statics:{doms:{}},members:{}});return e}),define("list/List",["require","pro","global/module/BaseModule","list/ListController","list/ListView"],function(t){function i(){this.callSpecial("init",{})}var e=(t("pro"),t("global/module/BaseModule")),s=t("list/ListController"),n=t("list/ListView");return e.extend({overrides:{name:"list",Controller:s,View:n},members:{listenSpecial:i}})}),define("wishsetting/WishSettingController",["require","pro","global/controller/BaseController","global/Broadcast","global/model/BaseModel","global/utils/Utils","global/utils/Location","global/model/GoodsModel","global/model/WishSettingModel","global/model/WishSettingCheckModel"],function(t){function i(){this.applySuper(arguments),this.checkModel=new S,this.init()}function e(){this.initListener(),this.view.msgbox=this.context.getParams("msgbox"),this.showSettingBox(this.context.getParams())}function s(){var t=this.view;this.listen(t,"btnOpenClick",this.onBtnOpenClick),this.listen(t,"btnSubmitClick",this.onBtnSubmitClick),this.listen(t,"btnThirdPartShareClick",this.onBtnThirdPartShareClick)}function n(t){t=t||{};var i=this.view;app.isLogin()?t.hasSet?i.renderHasSetBox():this.checkSetting(t):app.login()}function o(t){var i=this;this.checkModel.check({cid:app.getCID(),gid:t.gid},function(t){i.onCheckSettingSuc(t)},function(t){i.onCheckSettingErr(t)})}function r(t){var i=this;this.model.create({gid:this.goodsModel.get("gid"),nickname:t.nickname,days:t.days,wishes:t.wishes,wishSourceId:m.getParam("wishSourceId")},function(t){i.onSubmitSettingSuc(t)},function(t){i.onSubmitSettingErr(t)})}function a(){this.view.renderStepSubmit(this.goodsModel)}function l(t){var i=this.view,e=b.trim(t.nickname),s=b.trim(t.wishes);return""===e?void i.submitView.renderNickNameEmptyTip():""===s?void i.submitView.renderWishesEmptyTip():(i.submitView.renderBtnSubmitDisable(),void this.submitSetting({nickname:e,days:t.days,wishes:s}))}function d(t){window.gShare.share({title:"【一元夺宝】",target:t.target,desc:"#一元夺宝心愿单# 各位亲朋好友，别再为送什么发愁了！礼物我挑好了，你们就慷慨解囊帮我凑个单，圆我一个心愿吧。千儿八百不嫌多，一元两元也是爱。爱心凑单请戳链接:"+t.shareUrl,link:t.shareUrl,site:"一元夺宝"})}function c(t){t.hasIng?this.view.renderHasOngoingBox():(this.goodsModel=new v,this.goodsModel.set(t.goods),this.view.renderSettingBox())}function u(t){var i=t&&t.code;i==S.OUT_OF_STOCK?this.view.renderOutOfStockBox():this.view.renderFailToSetBox()}function h(t){this.send(w.WISH_SETTING_SUBMIT_SUCCESS),this.trigger("onCreateSuccess"),this.view.renderStepShare({shareUrl:t.url,weixinCodeImg:t.weixinCode,yixinCodeImg:t.yixinCode,isFromUser:this.model.get("isFromUser")||!1,hasMobile:app.hasMobile()})}function p(t){var i=t&&t.code;i==f.NICKNAME_TOO_LONG?this.view.submitView.renderNickNameTooLongTip():i==f.HAS_ONGOING?this.view.renderHasOngoingBox():i==f.OUT_OF_STOCK?this.view.renderOutOfStockBox():this.view.renderFailToSetBox()}var g=(t("pro"),t("global/controller/BaseController")),w=t("global/Broadcast"),b=(t("global/model/BaseModel"),t("global/utils/Utils")),m=t("global/utils/Location"),v=t("global/model/GoodsModel"),f=t("global/model/WishSettingModel"),S=t("global/model/WishSettingCheckModel"),y=g.extend({constructor:i,statics:{},members:{init:e,initListener:s,showSettingBox:n,checkSetting:o,submitSetting:r,onBtnOpenClick:a,onBtnSubmitClick:l,onBtnThirdPartShareClick:d,onCheckSettingSuc:c,onCheckSettingErr:u,onSubmitSettingSuc:h,onSubmitSettingErr:p}});return y}),define("wishsetting/WishInput",["require","pro","global/component/Base","ui/Textarea"],function(t){var i=t("pro"),e=t("global/component/Base"),s=t("ui/Textarea"),n=e.extend({constructor:function(){this.applySuper(arguments);var t=this.__config;switch(t.type=t.type||"user",t.type){case"user":t.placeholder="请认真填写邀请朋友凑单的话语，成不成就看你写得好不好了。懒得写？请从下面4个模板里挑选~",t.items=[{title:"江湖告急",content:"男侠女侠，鄙人钱包告急啊，不用你两肋插刀，只求帮忙付点钱凑个单，我想要这个礼物！拜托拜托~~"},{title:"甜蜜撒娇",content:"你说，你的钱包就是我的钱包，我也是这么想的，嘻嘻~别让我失望哦"},{title:"感情永恒",content:"提钱伤感情，那咱就谈感情吧，现在我想要这个礼物，你不会拒绝我的吧！"},{title:"威逼利诱",content:"谁说感情不能用金钱来衡量呢？！真是不能忍！你看着给吧！"}];break;case"friend":t.placeholder="这位大爷，您都准备赏钱了何不再给他/她捎句话？懒得写？请从下面4个模板里挑选",t.items=[{title:"江湖告急",content:"钱包告急还想要礼物啊，幸亏有我们这些好哥儿姐们！"},{title:"甜蜜撒娇",content:"买买买！亲，我怎么舍得让你失望呢"},{title:"感情永恒",content:"咱俩什么交情啊，一定会支持你的！"},{title:"威逼利诱",content:"爷赏你的，下次吃饭可不要忘了我！"}]}this.itemList=new i.List(t.items)},statics:{template:'<div class="w-wishes">					<div class="w-wishes-text" pro="textarea"></div>					<div class="w-wishes-tab" pro="tab"></div>				</div>',Tab:e.extend({statics:{template:'<div class="w-wishes-tab-wrap"><a class="w-wishes-tab-item" href="javascript:void(0)">{{title}}</a></div>',events:{"@":"click"},data:function(t){return{title:t.title,content:t.content}}},members:{select:function(){this.addClass("selected"),this.fire("select")},unselect:function(){this.removeClass("selected"),this.fire("unselect")}}}),doms:{textarea:"@textarea",tab:"@tab"},listeners:{render:function(t){var i=this,e=this.__config;t.style.width=e.width?e.width+"px":"auto";var o=s.extend({overrides:{template:'<div class="w-input w-input-textarea"><textarea class="w-input-input" pro="input"{{#maxLength}} maxlength="{{maxLength}}"{{/maxLength}}{{#__rawPlaceholder}}{{#placeholder}} placeholder={{placeholder}}{{/placeholder}}{{/__rawPlaceholder}} >{{value}}</textarea></div>'}});this.textarea=new o({width:e.width-18,height:70,maxLength:50,text:"",placeholder:e.placeholder}).render(this.doms.textarea),this.itemList.each(function(t,s){var o,r=t.get();o=new n.Tab({title:r.title,content:r.content}).join(i).render(i.doms.tab),o.listen("click",function(){i.switchTo(this)}),o.listen("destroy",function(){i.textarea.destroy(),i.textarea=null}),r.selected&&(e.selected=s)}),this.switchTo(e.selected||null)}}},members:{getTextarea:function(){return this.textarea},getTab:function(t){return this.getChild(t)},switchTo:function(t){this.each(function(i,e){t===i||t===e?(i.select(),this.fire("switch",e,i),this.textarea.setValue(t.model.get("content"))):i.unselect()})},getValue:function(){return this.textarea.getValue()},setValue:function(t){return this.textarea.setValue(t)},showTips:function(t,i){this.textarea.showTips(t,i)},hideTips:function(){this.textarea.hideTips()}}});return n}),define("wishsetting/WishSettingSetupView",["require","pro","global/view/BaseView"],function(t){var i=(t("pro"),t("global/view/BaseView")),e=i.extend({overrides:{template:['<div pro="step1" class="w-wishSetting w-wishSetting-step1">','   <div class="main">','       <p class="txt-red w-wishSetting-title">心愿单，挑礼物圆心愿，让亲朋好友为您凑单！</p>',"   </div>",'   <div class="flow">','       <div class="w-progressNode w-progressNode-3step">','       <ol class="inner">','           <li class="step step-1">','               <p class="name">挑选礼物开启心愿单</p>','               <div class="bg">1</div>',"           </li>",'           <li class="step step-2">','               <div class="ln"></div>','               <p class="name">发送付款链接给朋友<br/>求凑单</p>','               <div class="bg">2</div>',"           </li>",'           <li class="step step-3">','               <div class="ln"></div>','               <p class="name">获得礼物/得到红包</p>','               <div class="bg">3</div>',"           </li>","       </ol>","   </div>","</div>",'<p class="alert">重要提醒：如果未能在设置时间内完成凑单，则心愿单失败。<br/>已筹的资金将转为红包充值到您的一元夺宝帐号。</p>','<p class="btnBar"><button id="btnOpen" class="w-button w-button-main w-button-l">开启心愿单</button></p>',"</div>"].join(""),events:{"#btnOpen":"btnOpenClick"},entry:"@step1"}});return e}),define("wishsetting/WishSettingSubmitView",["require","pro","global/view/BaseView","ui/Button","ui/Input","ui/Select","wishsetting/WishInput","global/model/WishSettingDaysModel"],function(t){function i(){this.wishes.hideTips(),this.nickname.hideTips();var t={nickname:this.nickname.getValue(),days:this.days.getValue(),wishes:this.wishes.getValue()};this.fire("btnSubmitClick",t)}function e(){this.getSettingDays(),this.nickname=new u({className:"nicknameInput",width:260,value:app.getNickname()}).render(this.doms.nickname).join(this),this.wishes=new p({width:410,type:"user"}).render(this.doms.wishes).join(this)}function s(){var t=this,i=new g;i.fetch({cid:app.getCID(),gid:this.parents[0].context.controller.goodsModel.get("gid")},function(i){t.renderAvailableDays(i)},function(){t.renderAvailableDays({days:[1],defaultDay:1})})}function n(t){for(var i=[],e=0,s=0,n=t.days.length;n>s;s+=1){var o=t.days[s];i.push({value:o,text:o+"天"}),o==t.defaultDay&&(e=s)}this.days=new h({className:"nicknameInput",items:i,selected:e}).render(this.doms.days).join(this)}function o(){this.nickname.showTips("请填写昵称","err"),this.wishes.hideTips()}function r(){this.wishes.showTips("请填写心愿寄语","err"),this.nickname.hideTips()}function a(){this.doms.btnSubmit.disabled=!0,this.addClass("w-button-disabled","#btnSubmit")}function l(){this.doms.btnSubmit.disabled=!0,this.removeClass("w-button-disabled","#btnSubmit")}function d(){this.nickname.showTips("昵称输入过长~","err"),this.wishes.hideTips(),this.renderBtnSubmitResume()}var c=(t("pro"),t("global/view/BaseView")),u=(t("ui/Button"),t("ui/Input")),h=t("ui/Select"),p=t("wishsetting/WishInput"),g=t("global/model/WishSettingDaysModel"),w=c.extend({overrides:{template:['<div pro="step2" class="w-wishSetting w-wishSetting-step2">','   <div class="main">','       <p class="w-wishSetting-title">您的心愿单</p>','       <p class="w-wishSetting-subtitle">您挑选的是：<b class="txt-red f-breakword">{{gname}}</b></p>','       <div class="price">','           <p>礼物价值：<span class="txt-red"><b>{{price}}</b>夺宝币</span></p>',"       </div>","   </div>",'   <div class="w-form">','       <div class="w-form-item">','           <div class="w-form-name"><b>您的昵称：</b></div>','           <div class="w-form-cont">','               <span pro="nickname"></span><span class="txt-gray">让朋友知道是你哦~</span>',"           </div>","       </div>",'       <div class="w-form-item">','           <div class="w-form-name"><b>筹集期限：</b></div>','           <div class="w-form-cont" pro="days"></div>',"       </div>",'       <div class="w-form-item">','           <div class="w-form-name"><b>心愿寄语：</b></div>','           <div class="w-form-cont" pro="wishes"></div>',"       </div>","   </div>",'   <p class="btnBar"><button id="btnSubmit" class="w-button w-button-main w-button-l">提&nbsp;&nbsp;交</button></p>',"</div>"].join(""),doms:{nickname:"@nickname",days:"@days",wishes:"@wishes",btnSubmit:"#btnSubmit"},events:{"#btnSubmit":i},entry:"@step2",onCreate:e},members:{getSettingDays:s,renderAvailableDays:n,renderNickNameEmptyTip:o,renderWishesEmptyTip:r,renderBtnSubmitDisable:a,renderBtnSubmitResume:l,renderNickNameTooLongTip:d}});return w}),define("wishsetting/WishSettingShareView",["require","jquery","pro","global/view/BaseView"],function(t){function i(){var i=this;t(["jqureyzclip"],function(){i.renderBtnCopy()}),t(["http://mimg.127.net/hd/lib/share/share.min.js"],function(){})}function e(){var t=this,i=n(".w-wishlist-settingBox .w-msgbox-bd");i.find("[pro=btnCopy]").zclip({path:"http://mimg.127.net/p/yy/lib/swf/ZeroClipboard.swf",copy:function(){return i.find("[pro=urlInput]").val()},beforeCopy:function(){t.doms.urlInput.select()},afterCopy:function(){t.doms.copySuccessTip.style.display="block"}})}function s(t){var i=t.getAttribute("data-share");this.fire("btnThirdPartShareClick",i)}var n=t("jquery"),o=(t("pro"),t("global/view/BaseView")),r=o.extend({overrides:{template:['<div pro="step3" class="w-wishSetting w-wishSetting-step3">','   <div class="main">','       <p class="w-wishSetting-title">恭喜您成功开启心愿单！</p>','       <p class="w-wishSetting-subtitle">获得心愿礼物需要朋友们给力凑单，赶快召唤他们吧！</p>',"   </div>",'   <div class="w-wishSetting-share">','       <p class="title">发送付款链接给您的朋友来凑单：</p>','       <div class="url" pro="urlWrap">','           <div class="w-input"><input pro="urlInput" class="w-input-input" type="text" value="{{shareUrl}}" readonly="readonly" style="width:406px;" /></div>','           <a pro="btnCopy" class="w-button w-button-simple" href="javascript:void(0)">复制链接</a>','           <p class="txt-suc copySuccess" style="display: none;" pro="copySuccessTip"><i class="ico ico-suc-s"></i>已复制，快粘贴给朋友吧~</p>',"       </div>",'       <p class="title">扫描二维码分享给朋友或朋友圈：</p>','       <div class="code">','           <div class="code-wrap">','               <img pro="weixinCode" width="120" height="120" src="{{weixinCodeImg}}" />','               <p class="code-title">微信扫一扫</p>',"           </div>",'           <div class="code-wrap">','               <img pro="yixinCode" width="120" height="120" src="{{yixinCodeImg}}" />','               <p class="code-title">易信扫一扫</p>',"           </div>","       </div>",'       <div class="w-shareTo">','           <span class="w-shareTo-txt">更多分享</span>','           <ul class="w-shareTo-list" pro="shareTo">','               <li><a data-share="weibo" class="w-shareTo-ico w-shareTo-weibo" href="javascript:void(0)" title="分享至新浪微博"></a></li>','               <li><a data-share="qzone" class="w-shareTo-ico w-shareTo-qzone" href="javascript:void(0)" title="分享至QZone"></a></li>','               <li><a data-share="tqq" class="w-shareTo-ico w-shareTo-tqq" href="javascript:void(0)" title="分享至腾讯微博"></a></li>',"           </ul>","       </div>","</div>",'<p class="btnBar"><a pro="viewWishList" class="w-button w-button-main w-button-l" href="/user/wishlist.do"{{#isFromUser}} target="_blank"{{/isFromUser}}>查看我的心愿单</a></p>','{{#hasMobile}}<div style="height:20px"></div>{{/hasMobile}}','{{^hasMobile}}<p class="txt-gray link"><a href="/user/profile.do#mobile" target="_blank">完善手机号信息</a>，轻松跟踪心愿单状态！</p>{{/hasMobile}}','<p class="txt-gray tips">您还可以在“我的心愿单”里找到分享入口哦~</p>',"</div>"].join(""),doms:{btnCopy:"@btnCopy",shareTo:"@shareTo",urlInput:"@urlInput",copySuccessTip:"@copySuccessTip"},events:{"@shareTo a":s},entry:"@step3",onCreate:i},members:{renderBtnCopy:e}});return r}),define("wishsetting/WishSettingView",["require","pro","global/view/BaseView","ui/Button","ui/Input","ui/Select","wishsetting/WishInput","wishsetting/WishSettingSetupView","wishsetting/WishSettingSubmitView","wishsetting/WishSettingShareView"],function(t){function i(){var t=this;this.msgbox.entry.innerHTML=['<p style="text-align:center; padding-bottom: 30px;"><b>该商品已被设置为您的心愿单礼物，无需重复设置</b></p>','<div pro="operation" class="w-msgbox-ft"></div>'].join("");var i=this.msgbox.find("@operation");new c({text:"好&nbsp;&nbsp;的",onClick:function(){t.msgbox.destroy()}}).render(i).join(this).addClass("w-button-main"),new c({text:"查看我的心愿单",href:"/user/wishlist.do"}).render(i).join(this),this.msgbox.center()}function e(){var t=this;this.msgbox.entry.innerHTML=['<p style="text-align:center; padding-bottom: 30px;"><b>您有一个心愿正在进行中！结束了这个才能开启新的心愿单哦~</b></p>','<div pro="operation" class="w-msgbox-ft"></div>'].join("");var i=this.msgbox.find("@operation");new c({text:"好&nbsp;&nbsp;的",onClick:function(){t.msgbox.destroy()}}).render(i).join(this).addClass("w-button-main"),new c({text:"查看我的心愿单",href:"/user/wishlist.do"}).render(i).join(this),this.msgbox.center()}function s(){var t=this;this.msgbox.entry.innerHTML=['<p style="text-align:center; padding-bottom: 30px;">抱歉，该商品暂不能设置为心愿单礼物，请重新挑选</p>','<div pro="operation" class="w-msgbox-ft"></div>'].join("");var i=this.msgbox.find("@operation");new c({text:"好&nbsp;&nbsp;的",onClick:function(){t.msgbox.destroy()}}).render(i).join(this).addClass("w-button-main"),this.msgbox.center()}function n(){var t=this;this.msgbox.entry.innerHTML=['<p style="text-align:center; padding-bottom: 30px;">设置失败，请稍后重试</p>','<div pro="operation" class="w-msgbox-ft"></div>'].join("");var i=this.msgbox.find("@operation");new c({text:"好&nbsp;&nbsp;的",onClick:function(){t.msgbox.destroy()}}).render(i).join(this).addClass("w-button-main"),this.msgbox.center()}function o(){this.renderStepSetup()}function r(){var t=this,i=this.msgbox.entry;this.setupView=new u,this.setupView.render(i).join(this),this.setupView.listen("btnOpenClick",function(){t.fire("btnOpenClick")}),this.msgbox.center()}function a(t){var i=this;this.submitView=new h({model:t}),this.submitView.join(this),this.submitView.renderBy(this.setupView.dom),this.submitView.listen("btnSubmitClick",function(t){i.fire("btnSubmitClick",t)}),this.msgbox.center()}function l(t){var i=this;this.shareView=new p({data:t}),this.shareView.join(this),this.shareView.renderBy(this.submitView.dom),this.shareView.listen("btnThirdPartShareClick",function(t){i.fire("btnThirdPartShareClick",{target:t,shareUrl:i.model.get("url")})}),this.msgbox.center()}var d=(t("pro"),t("global/view/BaseView")),c=t("ui/Button"),u=(t("ui/Input"),t("ui/Select"),t("wishsetting/WishInput"),t("wishsetting/WishSettingSetupView")),h=t("wishsetting/WishSettingSubmitView"),p=t("wishsetting/WishSettingShareView"),g=d.extend({statics:{},members:{renderHasSetBox:i,renderHasOngoingBox:e,renderOutOfStockBox:s,renderFailToSetBox:n,renderSettingBox:o,renderStepSetup:r,renderStepSubmit:a,renderStepShare:l}});return g}),define("wishsetting/WishSetting",["require","pro","global/module/BaseModule","wishsetting/WishSettingController","wishsetting/WishSettingView","global/model/WishSettingModel"],function(t){function i(){var t=this;this.listen(this.controller,"onCreateSuccess",function(){t.callSpecial("onSuccess")})}var e=(t("pro"),t("global/module/BaseModule")),s=t("wishsetting/WishSettingController"),n=t("wishsetting/WishSettingView"),o=t("global/model/WishSettingModel"),r=e.extend({overrides:{name:"wishSetting",Controller:s,View:n,Model:o},statics:{msgboxClass:"w-wishlist-settingBox"},members:{listenSpecial:i}});return r}),define("quickBuyList/QuickBuyListController",["require","pro","global/controller/BaseController","global/utils/Url","wishsetting/WishSetting","global/Broadcast","global/model/CartModelList"],function(t){function i(){this.applySuper(arguments),this.init()}function e(){this.initListener(),this.view.renderGoodsList(),this.view.renderBtnBuyAll(),this.initWishSetting()}function s(){var t=this.view;this.listen(t,"btnQuickBuyClick",this.onBtnQuickBuyClick),this.listen(t,"btnAddCartClick",this.onBtnAddCartClick),this.listen(t,"btnBuyAllClick",this.onBtnBuyAllClick)}function n(){this.view.renderBtnWishSetting(),this.listen(this.view,"btnWishSettingClick",this.onBtnWishSettingClick),this.receive(h.WISH_SETTING_SUBMIT_SUCCESS,this.onWishSettingSubmitSuccess)}function o(t,i){window.app.duo({gid:t.get("goods").gid,period:t.get("period"),num:i,regularBuy:1})}function r(t,i,e){window.app.addToCart({gid:t.get("goods").gid,period:t.get("period"),num:i},e)}function a(t){app.isLogin()?(app.addToCart(t),app.go("cart")):app.login()}function l(t,i){this.currentWishSettingView=i,this.wishSetting=this.context.launchInMsgbox(u,t)}function d(){this.view.renderWishSetting(!0,this.currentWishSettingView),this.currentWishSettingView=null}var c=(t("pro"),t("global/controller/BaseController")),u=(t("global/utils/Url"),t("wishsetting/WishSetting")),h=t("global/Broadcast");t("global/model/CartModelList");return c.extend({constructor:i,statics:{},members:{init:e,initListener:s,initWishSetting:n,onBtnQuickBuyClick:o,onBtnAddCartClick:r,onBtnBuyAllClick:a,onBtnWishSettingClick:l,onWishSettingSubmitSuccess:d}})}),define("quickBuyList/QuickBuyListView",["require","jquery","pro","global/view/BaseView","global/utils/Lazyload","ui/NumberInput","ui/Pager","global/model/PeriodModel"],function(t){function i(){var t=this,i=d(".w-quickBuyList .w-goods");0!=this.context.getParams("typeId")&&d(this.doms.btnBuyAll).on("click",function(){var e=[];return i.each(function(){var t=d(this);e.push({id:t.attr("data-gid")-0,period:t.attr("data-period")-0,num:t.find(".w-number-input").val()-0,regularBuy:1})}),t.fire("btnBuyAllClick",e),!1})}function e(){var t=this,i=d(".w-quickBuyList");i.on("click",".w-goods-btn-quickBuy, .w-goods-btn-addToCart",function(){var i=d(this),e=i.closest(".w-goods-ing").get(0),s=d(e),n=t.extractData(s),o=t.getBuyTimes(n.get("goods").gid);return i.hasClass("w-goods-btn-quickBuy")?t.fire("btnQuickBuyClick",n,o):t.fire("btnAddCartClick",n,o,s.find(".w-goods-pic").find("img")[0]),!1}),this.renderGoodsPictures()}function s(t){var i=new p;return i.set({period:t.attr("data-period")-0,existingTimes:t.attr("data-existingTimes")-0,goods:{gid:t.attr("data-gid"),price:t.attr("data-price")-0,totalTimes:t.attr("data-totalTimes")-0,buyUnit:t.attr("data-buyUnit")-0,regularBuyMax:t.attr("data-regularBuyMax")-0}}),i}function n(t,i){var e=i.get("goods").totalTimes-i.get("existingTimes");new h({subclass:"inline",width:65,value:i.get("defaultBuyTimes"),min:e>i.get("goods").buyUnit?i.get("goods").buyUnit:e,max:e,step:i.get("goods").buyUnit}).render(t[0]).join(this)}function o(t){var i=d(this.dom).find(".w-goods[data-gid="+t+"]");return i.find(".w-number-input").val()-0}function r(){var t=this;d(".w-wishSetEntry").parent(".w-quickBuyList-item").hover(function(){d(this).find(".w-wishSetEntry").show()},function(){d(this).find(".w-wishSetEntry").hide()}),d(".w-quickBuyList").on("click",".w-wishSetEntry",function(){var i={hasSet:d(this).attr("data-setted")-0,gid:d(this).attr("data-gid")||0,gname:d(this).parent(".w-quickBuyList-item").find(".w-goods-title a").attr("title")||"",price:d(this).attr("data-price")||0};t.fire("btnWishSettingClick",i,d(this))})}function a(t,i){t&&(i.html('已设为心愿单<i class="ico ico-wishHeart ico-wishHeart-solid"></i>'),i.attr("data-setted",1))}function l(){this.oLazyload=new u}var d=t("jquery"),c=(t("pro"),t("global/view/BaseView")),u=t("global/utils/Lazyload"),h=t("ui/NumberInput"),p=(t("ui/Pager"),t("global/model/PeriodModel")),g=c.extend({statics:{doms:{btnBuyAll:"#buyAll"}},members:{renderBtnBuyAll:i,renderGoodsList:e,extractData:s,renderBuyTimes:n,getBuyTimes:o,renderBtnWishSetting:r,renderWishSetting:a,renderGoodsPictures:l}});return g}),define("quickBuyList/QuickBuyList",["require","pro","global/module/BaseModule","quickBuyList/QuickBuyListController","quickBuyList/QuickBuyListView"],function(t){var i=(t("pro"),t("global/module/BaseModule")),e=t("quickBuyList/QuickBuyListController"),s=t("quickBuyList/QuickBuyListView");return i.extend({overrides:{name:"quickBuyList",Controller:e,View:s}})}),define("list-ftl",function(){});